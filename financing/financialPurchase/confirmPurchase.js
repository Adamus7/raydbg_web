webpackJsonp([11],{149:function(e,t,a){var r=a(0)(a(292),a(623),function(e){a(480)},null,null);e.exports=r.exports},205:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(1),l=(a(3),a(2)),o=a(149),n=a.n(o);App.vm=new r.default({mixins:l.a,render:function(e){return e(n.a)}})},259:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(41),l=a.n(r),o=a(65);t.default={name:"x-switch",components:{InlineDesc:l.a},computed:{labelStyle:function(){var e=/<\/?[^>]*>/.test(this.title),t=Math.min(e?5:this.title.length+1,14)+"em";return a.i(o.a)({display:"block",width:this.$parent.labelWidth||t,textAlign:this.$parent.labelAlign})},labelClass:function(){return{"vux-cell-justify":this.$parent&&"justify"===this.$parent.labelAlign}}},methods:{onClick:function(){this.$emit("on-click",!this.currentValue,this.currentValue)},toBoolean:function(e){return this.valueMap?1===this.valueMap.indexOf(e):e},toRaw:function(e){return this.valueMap?this.valueMap[e?1:0]:e}},props:{title:{type:String,required:!0},disabled:Boolean,value:{type:[Boolean,String,Number],default:!1},inlineDesc:[String,Boolean,Number],preventDefault:Boolean,valueMap:{type:Array,default:function(){return[!1,!0]}}},data:function(){return{currentValue:this.toBoolean(this.value)}},watch:{currentValue:function(e){var t=this.toRaw(e);this.$emit("input",t),this.$emit("on-change",t)},value:function(e){this.currentValue=this.toBoolean(e)}}}},292:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a(7),c=a.n(r),l=a(10),o=a.n(l),n=a(5),i=a.n(n),s=a(6),p=a.n(s),u=a(8),d=a.n(u),m=a(11),f=a.n(m),v=a(673),h=a.n(v),b=a(42),g=a.n(b),A=a(62),_=a.n(A),w=a(13),C=a(9),y=a(95),M=a.n(y),k=App.parseQueryString(),N=JSON.parse(k.data),x=k.type;t.default={data:function(){return{type:x,balance:"",details:N,isSelect:!1,isFirst:"1"===k.isFirstBuy,pwd:"",openState:!1,cltMgrDisabled:!0,afterVoting:["自动续投1期","无限期滚投"],cltMgrPlaceholder:"",val:["自动续投1期"],form:{cardNo:"",bnkAcc:"",prdCde:N.prdCode,amt:"",cltMgr:"",password:"",pwdRandomNum:"",remind:!1}}},components:{selectCard:_.a,Group:i.a,Cell:p.a,XButton:d.a,XInput:f.a,XSwitch:h.a,checkIcon:M.a,cellPicker:g.a},filters:C.a,methods:o()({formatAmt:function(e){return isNaN(e)?"——":0===parseFloat(e)?"无限制":C.a.formatAmount(e)+"元"},onCltMgrBlur:function(){"add"===x?this.doRemote("lc-zjqr-04"):this.doRemote("lc-qr-03")},onAmtBlur:function(){"add"===x?this.doRemote("lc-zjqr-03",this.form.amt):this.doRemote("lc-qr-02",this.form.amt)},doRemote:function(e,t){var a={};t&&(a.other=t),App.remoteLog(e,a)},selectCard:function(e){var t=parseFloat(e.cardAcctBal);"NaN"==(this.balance=t)&&(this.balance=0)},openProtocol:function(e){App.pushProtocol({prdCde:N.prdCode,type:e})},getautoBuyFlag:function(e){return 1==e?"1":"0"},getautoBuyTimes:function(e){return"自动续投1期"==e?"1":"无限期滚投"==e?"2":void 0},checkSubmit:function(){var e=this.form,t=e.amt,a=(e.password,e.cltMgr);if(this.openState&&""==a)return App.Native.alert("请输入推荐人号码"),!1;if(""===t)return App.Native.alert("请输入购买金额"),!1;if(0===parseFloat(t))return App.Native.alert("购买金额不能为0"),!1;if(parseFloat(t)>this.balance)return App.Native.alert("可用余额不足"),!1;if(this.isFirst){if(parseFloat(t)<parseFloat(N.perFirstMinAmt))return App.Native.alert("首次购买金额最低为"+N.perFirstMinAmt+"元"),!1}else if(parseFloat(t)<parseFloat(N.perAppendMinAmt))return App.Native.alert("最低投资金额最低为"+N.perAppendMinAmt+"元"),!1;return N.isInvite&&parseFloat(t)>parseFloat(N.invLim)?(App.Native.alert("购买金额不能超过邀请码额度"),!1):!N.isInvite&&0!==parseFloat(N.perMaxAmt)&&parseFloat(t)>parseFloat(N.perMaxAmt)?(App.Native.alert("单笔最大购买金额为"+N.perMaxAmt+"元"),!1):""===this.pwd?(App.Native.alert("请输入取款密码"),!1):6!==this.pwd.length?(App.Native.alert("请输入6位取款密码"),!1):!!this.isSelect||(App.Native.alert("请确定您已阅读风险提示，愿意承担投资风险"),!1)},doSubmit:function(){var e=this.form,t=e.cardNo,a=(e.bnkAcc,e.prdCde),r=e.amt,l=e.cltMgr,o=e.password,n=e.pwdRandomNum;if("add"===x?this.doRemote("lc-zjqr-09",N.prdCode):this.doRemote("lc-qr-08",N.prdCode),this.checkSubmit()){var i={cardNo:t,prdCode:a,transAmount:r,introducer:l,sourcePwd:o,pwdRandom:n,autoBuyFlag:this.getautoBuyFlag(this.form.remind),autoBuyTimes:this.getautoBuyTimes(this.val[0])};N.isInvite&&(i.inviteCode=N.isInvite),App.Native.rpc({operationType:"com.MB800007",data:i}).then(function(e){"0000"===e.errorCode||"0"===e.errorCode?(App.remoteLog("lc-qr-11",{money:r}),App.Native.pushWindow({url:"/financing/financialPurchase/purchaseSuccess.html",data:{data:c()(N),type:x,from:k.from,stat:e.data.stat,incomeStart:e.data.incomeStart}}),"add"===x?App.remoteLog("lc-zjqr-12"):App.remoteLog("lc-jg-01",{other:N.prdCode})):(App.pushResult({docTitle:"理财产品",type:"error",code:e.errorCode,msg:e.errorMsg,mciCode:"1792001056",mciRemoteId:"lc-mci0056-04",backRemoteId:"add"===x?"lc-zjqr-14":"lc-qr-09",homeRemoteId:"add"===x?"lc-zjqr-15":"lc-qr-10"}),"add"===x?App.remoteLog("lc-zjqr-13",{errorid:e.errorCode}):App.remoteLog("lc-jg-02",{errorid:e.errorCode}))})}},getPassword:function(e){this.form.password=e.pwd,this.form.pwdRandomNum=e.random,"add"===x?App.remoteLog("lc-zjqr-05"):App.remoteLog("lc-qr-04")},getCardInfo:function(e){var a=this;App.Native.rpc({operationType:"com.MB030311",data:{prdType:"1"}}).then(function(e){var t=e.data.mbAccInfoIcoll[0];a.form.cardNo=t.cardNo,a.form.bnkAcc=parseInt(t.accountNo).toString(),a.balance=parseFloat(t.availBalance)/100,isNaN(a.balance)&&(a.balance=0)})},readTip:function(){this.isSelect&&("add"===x?App.remoteLog("lc-zjqr-06"):App.remoteLog("lc-qr-05"))},onClickSwitch:function(){this.openState?this.openState&&(this.cltMgrDisabled=!1,this.cltMgrPlaceholder="请输入推荐人代码"):(this.cltMgrDisabled=!0,this.cltMgrPlaceholder="",this.form.cltMgr="")}},w.a),mounted:function(){this.getCardInfo(),"add"===x?("havelist"===k.from?App.remoteLog("lc-zjqr-01"):App.remoteLog("lc-zjqr-02"),App.on("back",function(){App.remoteLog("lc-zjqr-10")}),App.on("subtitleClick",function(e){App.remoteLog("lc-zjqr-11")})):(App.remoteLog("lc-qr-01",{other:N.prdCode}),App.on("back",function(){App.remoteLog("lc-qr-09")}),App.on("subtitleClick",function(e){App.remoteLog("lc-qr-10")}))}}},4:function(e,t){e.exports=vendor_library},478:function(e,t){},480:function(e,t){},621:function(e,t){e.exports={render:function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"vux-x-switch weui-cell weui-cell_switch"},[t("div",{staticClass:"weui-cell__bd"},[t("label",{staticClass:"weui-label",class:o.labelClass,style:o.labelStyle,domProps:{innerHTML:o._s(o.title)}}),o._v(" "),o.inlineDesc?t("inline-desc",[o._v(o._s(o.inlineDesc))]):o._e()],1),o._v(" "),t("div",{staticClass:"weui-cell__ft"},[t("input",{directives:[{name:"model",rawName:"v-model",value:o.currentValue,expression:"currentValue"}],staticClass:"weui-switch",attrs:{type:"checkbox",disabled:o.disabled},domProps:{checked:Array.isArray(o.currentValue)?-1<o._i(o.currentValue,null):o.currentValue},on:{change:function(e){var t=o.currentValue,a=e.target,r=!!a.checked;if(Array.isArray(t)){var l=o._i(t,null);a.checked?l<0&&(o.currentValue=t.concat([null])):-1<l&&(o.currentValue=t.slice(0,l).concat(t.slice(l+1)))}else o.currentValue=r}}}),o._v(" "),o.preventDefault?t("div",{staticClass:"vux-x-switch-overlay",on:{click:o.onClick}}):o._e()])])},staticRenderFns:[]}},623:function(e,t){e.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-page",[a("div",{staticClass:"main"},[a("div",{staticClass:"confirmPurchase"},[a("h6",[a("span",[t._v("产品名称")]),t._v(t._s(t.details.prdName))]),t._v(" "),a("group",[a("v-cell",{attrs:{label:"付款账号","label-class":"label-class",showAlias:!0,value:t._f("formatCardNo")(t.form.cardNo),down:""},on:{content:t.selectCard}}),t._v(" "),a("v-cell",{staticClass:"amount-value",attrs:{label:"可用余额","label-class":"label-class",value:t._f("formatAmount")(t.balance),valueUnit:"元"}}),t._v(" "),"add"===t.type?a("v-cell",{staticClass:"amount-value",attrs:{label:"追加最低金额","label-class":"label-class",value:t.formatAmt(t.details.perAppendMinAmt)}}):t._e(),t._v(" "),a("cell-input",{attrs:{label:"购买金额",type:"amount","label-class":"label-class",placeholder:"请输入购买的金额",maxlength:14},on:{numberBlur:t.onAmtBlur},model:{value:t.form.amt,callback:function(e){t.$set(t.form,"amt",e)},expression:"form.amt"}}),t._v(" "),a("v-cell",{attrs:{label:"大写金额","label-class":"label-class",value:t._f("formatAmountUpper")(t.form.amt)}}),t._v(" "),"1306"===t.details.templateCode?a("x-switch",{attrs:{title:"到期自动续投"},model:{value:t.form.remind,callback:function(e){t.$set(t.form,"remind",e)},expression:"form.remind"}}):t._e(),t._v(" "),a("cell-picker",{directives:[{name:"show",rawName:"v-show",value:t.form.remind,expression:"form.remind"}],attrs:{title:"续投期数","title-class":"title-class",data:t.afterVoting},model:{value:t.val,callback:function(e){t.val=e},expression:"val"}}),t._v(" "),a("cell-input",{attrs:{label:"推荐人代码","label-class":"label-class",placeholder:t.cltMgrPlaceholder,maxlength:10,disabled:t.cltMgrDisabled},on:{blur:t.onCltMgrBlur},model:{value:t.form.cltMgr,callback:function(e){t.$set(t.form,"cltMgr",e)},expression:"form.cltMgr"}},[a("div",{attrs:{slot:"center-switch"},slot:"center-switch"},[a("x-switch",{attrs:{title:""},on:{"on-change":t.onClickSwitch},model:{value:t.openState,callback:function(e){t.openState=e},expression:"openState"}})],1)]),t._v(" "),a("cell-input",{attrs:{label:"取款密码",type:"password","label-class":"label-class",placeholder:"请输入取款密码",maxlength:6},on:{getPassword:t.getPassword},model:{value:t.pwd,callback:function(e){t.pwd=e},expression:"pwd"}})],1),t._v(" "),a("div",{staticClass:"alreadyRead"},[a("check-icon",{on:{input:t.readTip},model:{value:t.isSelect,callback:function(e){t.isSelect=e},expression:"isSelect"}},[a("p",{staticClass:"readP"},[t._v("已阅读"),a("span",{on:{click:function(e){e.stopPropagation(),t.openProtocol("1")}}},[t._v("产品说明书")]),t._v("，"),a("span",{on:{click:function(e){e.stopPropagation(),t.openProtocol("2")}}},[t._v("风险揭示书")]),t._v("和"),a("span",{on:{click:function(e){e.stopPropagation(),t.openProtocol("3")}}},[t._v("客户权益须知")]),t._v("，并愿意承担投资风险。")])])],1),t._v(" "),a("div",{staticClass:"btn-area"},[a("v-button",{attrs:{type:"primary"},on:{click:function(e){t.doSubmit()}}},[t._v("确  定")])],1)],1),t._v(" "),a("mci",{attrs:{code:"1792001056",remoteId:"lc-mci0056-03",step:"M"}})],1)])},staticRenderFns:[]}},673:function(e,t,a){var r=a(0)(a(259),a(621),function(e){a(478)},null,null);e.exports=r.exports}},[205]);